// =============================================================================
// JS/VENDOR/BIGVIDEO/BIGVIDEO-1.0.0.MIN.JS
// -----------------------------------------------------------------------------
// BigVideo - The jQuery Plugin for Big Background Video (and Images)
// by John Polacek (@johnpolacek)
// 
// Dual licensed under MIT and GPL.
// 
// Dependencies: jQuery, jQuery UI (Slider), Video.js, ImagesLoaded
// =============================================================================

(function(e){e.BigVideo=function(t){function w(){var t=e(window).width(),n=e(window).height(),r=t/n;if(r<a)if(y==="video"){i.width(n*a).height(n);e(s).css("top",0).css("left",-(n*a-t)/2).css("height",n);e(s+"_html5_api").css("width",n*a);e(s+"_flash_api").css("width",n*a).css("height",n)}else e("#big-video-image").css({width:"auto",height:n,top:0,left:-(n*a-t)/2});else if(y==="video"){i.width(t).height(t/a);e(s).css("top",-(t/a-n)/2).css("left",0).css("height",t/a);e(s+"_html5_api").css("width","100%");e(s+"_flash_api").css("width",t).css("height",t/a)}else e("#big-video-image").css({width:t,height:"auto",top:-(t/a-n)/2,left:0})}function E(){var t='<div id="big-video-control-container">';t+='<div id="big-video-control">';t+='<a href="#" id="big-video-control-play"></a>';t+='<div id="big-video-control-middle">';t+='<div id="big-video-control-bar">';t+='<div id="big-video-control-bound-left"></div>';t+='<div id="big-video-control-progress"></div>';t+='<div id="big-video-control-track"></div>';t+='<div id="big-video-control-bound-right"></div>';t+="</div>";t+="</div>";t+='<div id="big-video-control-timer"></div>';t+="</div>";t+="</div>";b.container.append(t);e("#big-video-control-container").css("display","none");e("#big-video-control-track").slider({animate:!0,step:.01,slide:function(t,n){h=!0;e("#big-video-control-progress").css("width",n.value-.16+"%");i.currentTime(n.value/100*i.duration())},stop:function(e,t){h=!1;i.currentTime(t.value/100*i.duration())}});e("#big-video-control-bar").click(function(t){i.currentTime(t.offsetX/e(this).width()*i.duration())});e("#big-video-control-play").click(function(e){e.preventDefault();S("toggle")});i.on("timeupdate",function(){if(!h&&i.currentTime()/i.duration()){var t=i.currentTime(),n=Math.floor(t/60),r=Math.floor(t)-60*n;r<10&&(r="0"+r);var s=i.currentTime()/i.duration()*100;e("#big-video-control-track").slider("value",s);e("#big-video-control-progress").css("width",s-.16+"%");e("#big-video-control-timer").text(n+":"+r+"/"+f)}})}function S(t){var n=t||"toggle";n==="toggle"&&(n=p?"pause":"play");if(n==="pause"){i.pause();e("#big-video-control-play").css("background-position","-16px");p=!1}else if(n==="play"){i.play();e("#big-video-control-play").css("background-position","0");p=!0}}function x(){i.play();b.container.off("click",x)}function T(){g++;g===m.length&&(g=0);N(m[g])}function N(t){e(s).css("display","block");y="video";i.src(t);p=!0;if(v){e("#big-video-control-container").css("display","none");i.ready(function(){i.volume(0)});doLoop=!0}else{e("#big-video-control-container").css("display","block");i.ready(function(){i.volume(l)});doLoop=!1}e("#big-video-image").css("display","none");e(s).css("display","block")}function C(t){e("#big-video-image").remove();i.pause();e(s).css("display","none");e("#big-video-control-container").css("display","none");y="image";var n=e('<img id="big-video-image" src='+t+" />");o.append(n);e("#big-video-image").imagesLoaded(function(){a=e("#big-video-image").width()/e("#big-video-image").height();w()})}var n={useFlashForFirefox:!0,forceAutoplay:!1,controls:!0,doLoop:!1,container:e(".bg-video")},r=this,i,s="#big-video-vid",o=e('<div id="big-video-wrap"></div>'),u=e(""),a=16/9,f=0,l=.8,c=!1,h=!1,p=!1,d=!1,v=!1,m=[],g,y,b=e.extend({},n,t);r.init=function(){if(!c){b.container.prepend(o);var t=b.forceAutoplay?"autoplay":"";i=e('<video id="'+s.substr(1)+'" class="video-js vjs-default-skin" preload="auto" data-setup="{}" '+t+" webkit-playsinline></video>");i.css("position","absolute");o.append(i);var n=["html5","flash"],r=navigator.userAgent.toLowerCase(),u=r.indexOf("firefox")!=-1;b.useFlashForFirefox&&u&&(n=["flash","html5"]);i=videojs(s.substr(1),{controls:!1,autoplay:!0,preload:"auto",techOrder:n});b.controls&&E();w();c=!0;p=!1;b.forceAutoplay&&e("body").on("click",x);e("#big-video-vid_flash_api").attr("scale","noborder").attr("width","100%").attr("height","100%");e(window).resize(function(){w()});i.on("loadedmetadata",function(t){document.getElementById("big-video-vid_flash_api")?a=document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoWidth")/document.getElementById("big-video-vid_flash_api").vjs_getProperty("videoHeight"):a=e("#big-video-vid_html5_api").prop("videoWidth")/e("#big-video-vid_html5_api").prop("videoHeight");w();var n=Math.round(i.duration()),r=Math.floor(n/60),s=n-r*60;s<10&&(s="0"+s);f=r+":"+s});i.on("ended",function(){if(b.doLoop){i.currentTime(0);i.play()}d&&T()})}};r.show=function(e,t){t===undefined&&(t={});v=t.ambient===!0;if(v||t.doLoop)b.doLoop=!0;if(typeof e=="string"){var n=e.substring(e.lastIndexOf(".")+1);if(n==="jpg"||n==="gif"||n==="png")C(e);else{t.altSource&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(e=t.altSource);N(e);d=!1}}else{m=e;g=0;N(m[g]);d=!0}};r.getPlayer=function(){return i};r.triggerPlayer=function(e){S(e)}}})(jQuery);